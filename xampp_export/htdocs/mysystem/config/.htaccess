<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /mysystem/
  
  # Allow access to api directory
  RewriteRule ^api/ - [L]
  
  # Forward _next and assets directly to index.php if not found
  # This ensures index.php's smart serving logic handles them
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^_next/(.*)$ index.php [L]
  RewriteRule ^assets/(.*)$ index.php [L]
  
  # Redirect everything else to index.php (which serves React)
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . index.php [L]
</IfModule>
